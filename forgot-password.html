<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recuperar Senha - Impulsa</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <div class="logo-icon">üí¨</div>
                <span class="logo-text">Impulsa</span>
            </div>
            <nav class="nav">
                <a href="/">In√≠cio</a>
                <a href="/login.html">Entrar</a>
                <a href="/signup.html">Criar Conta</a>
            </nav>
        </div>
    </header>

    <main class="auth-page">
        <div class="container">
            <div class="auth-container">
                <div class="auth-header">
                    <h1>Recuperar Senha</h1>
                    <p>Digite seu e-mail e enviaremos um link para redefinir sua senha</p>
                </div>

                <div class="auth-form-container">
                    <form id="forgotPasswordForm" class="auth-form">
                        <div class="form-group">
                            <label for="email">E-mail</label>
                            <input type="email" id="email" name="email" placeholder="seu@empresa.com.br" required>
                            <div class="error-message" id="emailError"></div>
                        </div>

                        <button type="submit" class="cta-button primary auth-button">
                            <span class="button-text">Enviar link de recupera√ß√£o</span>
                            <span class="loading-spinner" style="display: none;">‚è≥</span>
                        </button>

                        <div class="form-footer">
                            <p>Lembrou da senha? <a href="/login.html" class="link-primary">Fazer login</a></p>
                            <p>N√£o possui uma conta? <a href="/signup.html" class="link-primary">Cadastre-se gr√°tis</a></p>
                        </div>
                    </form>

                    <!-- Success Message (hidden by default) -->
                    <div id="successMessage" class="success-message" style="display: none;">
                        <div class="success-icon">‚úÖ</div>
                        <h3>E-mail enviado com sucesso!</h3>
                        <p>Se existe uma conta com o e-mail informado, voc√™ receber√° um link para redefinir sua senha em alguns minutos.</p>
                        <p>Verifique tamb√©m sua caixa de spam.</p>
                        <div class="success-actions">
                            <a href="/login.html" class="cta-button secondary">Voltar ao login</a>
                            <button onclick="resetForm()" class="link-button">Tentar outro e-mail</button>
                        </div>
                    </div>
                </div>

                <!-- Help Card -->
                <div class="help-card">
                    <h3>üí¨ Problemas para acessar?</h3>
                    <p>Nossa equipe est√° aqui para ajudar voc√™ a recuperar o acesso √† sua conta</p>
                    <div class="help-buttons">
                        <a href="https://wa.me/5511984261025" target="_blank" class="help-btn whatsapp">
                            Falar no WhatsApp
                        </a>
                        <a href="mailto:suporte@impulsa.com.br" class="help-btn email">
                            Enviar E-mail
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="auth-footer">
        <div class="container">
            <p>¬© 2025 Impulsa. Todos os direitos reservados. | <a href="#">Termos de Uso</a> | <a href="#">Privacidade</a></p>
        </div>
    </footer>

    <script src="auth.js"></script>
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Redirect if already authenticated
            if (isAuthenticated()) {
                window.location.href = '/dashboard.html';
                return;
            }

            initializeForgotPasswordForm();
        });

        function initializeForgotPasswordForm() {
            const form = document.getElementById('forgotPasswordForm');
            if (!form) return;

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                clearAllErrors();

                const formData = new FormData(form);
                const email = formData.get('email');

                // Validation
                if (!validateEmail(email)) {
                    showError('emailError', 'E-mail inv√°lido');
                    return;
                }

                // Show loading
                const submitButton = form.querySelector('button[type="submit"]');
                setButtonLoading(submitButton, true);

                // Simulate sending password reset email
                setTimeout(() => {
                    setButtonLoading(submitButton, false);
                    
                    // Hide form and show success message
                    form.style.display = 'none';
                    document.getElementById('successMessage').style.display = 'block';
                    
                    // Track password reset request
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'password_reset_request', {
                            event_category: 'Auth',
                            event_label: 'Forgot Password'
                        });
                    }
                }, 1500);
            });
        }

        function resetForm() {
            // Show form and hide success message
            document.getElementById('forgotPasswordForm').style.display = 'block';
            document.getElementById('successMessage').style.display = 'none';
            
            // Clear form
            document.getElementById('email').value = '';
            clearAllErrors();
        }
    </script>

    <style>
        .success-message {
            text-align: center;
            padding: 2rem;
        }

        .success-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .success-message h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 1rem;
        }

        .success-message p {
            color: #6b7280;
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .success-actions {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: center;
        }

        .success-actions .link-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
        }

        @media (max-width: 768px) {
            .success-actions {
                gap: 0.75rem;
            }
        }
    </style>
</body>
</html>